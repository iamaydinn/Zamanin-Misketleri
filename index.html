<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZamanÄ±n Misketleri â€” 50 KartlÄ± Dijital YerleÅŸtirme</title>
<meta name="description" content="ZamanÄ±n Misketleri â€” Sosyal Bilgiler dersinde oyun temelli kronoloji Ã¶ÄŸretimi. AtatÃ¼rk Ãœniversitesi, 2025.">
<meta name="author" content="Muhammet Emin AydÄ±n, Ã–mer Faruk Aras, Batuhan KalaycÄ±oÄŸlu, Abdulsamet DoÄŸramacÄ±, Mert Ã–mer Cacim">
<style>
:root{
  --bg:#f6fbff; --card:#ffffff; --muted:#6b7280; --accent:#5b21b6;
  --panel:#e6eefc; --shadow:0 6px 18px rgba(11,35,70,0.08);
  font-family:"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
}
html,body{height:100%;margin:0;background:var(--bg);color:#0b1220}
.app{max-width:1150px;margin:18px auto;padding:18px;}
header{display:flex;gap:12px;align-items:center;margin-bottom:12px;}
.logo{display:flex;gap:12px;align-items:center;}
.logo .title{font-size:20px;font-weight:800;color:var(--accent);}
.controls{margin-left:auto;display:flex;gap:8px;align-items:center;}
.btn{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;box-shadow:var(--shadow);font-weight:600;}
.btn.secondary{background:transparent;color:var(--accent);border:2px solid var(--accent);}
.panel{background:var(--card);padding:12px;border-radius:10px;box-shadow:var(--shadow);}
.top-area{display:flex;gap:12px;margin-bottom:14px;}
.left{width:260px;min-height:360px;display:flex;flex-direction:column;gap:10px;}
.team-list{display:flex;flex-direction:column;gap:8px;}
.team-item{padding:8px;border-radius:8px;background:linear-gradient(90deg,#eef2ff,#fff);display:flex;align-items:center;justify-content:space-between;font-weight:700;color:#0b1220;cursor:pointer;}
.team-item.active{outline:3px solid rgba(91,33,182,0.12)}
.score{font-weight:800;color:var(--accent);font-size:18px;}
.add-team{display:flex;gap:6px;align-items:center;margin-top:8px;}
input[type="text"]{padding:8px;border-radius:8px;border:1px solid #dbeafe;flex:1}
.middle{flex:1;min-height:360px;display:flex;flex-direction:column;gap:12px;}
.eras{display:flex;gap:10px;justify-content:space-between;}
.era{flex:1;padding:10px;border-radius:10px;background:var(--panel);min-height:120px;display:flex;flex-direction:column;gap:6px;align-items:center;border:2px dashed transparent;transition:all .15s ease;overflow:auto}
.era:hover{transform:translateY(-3px)}
.era.dragover{border-color:var(--accent);background:linear-gradient(180deg,#eef2ff,#ffffff)}
.era .era-name{font-weight:800;color:#073b4c}
.era .era-range{font-size:12px;color:var(--muted)}
.board{display:flex;gap:10px;margin-top:6px;flex-wrap:wrap;align-items:flex-start;min-height:120px}
.card{width:200px;padding:10px;border-radius:8px;background:var(--card);box-shadow:var(--shadow);cursor:grab;margin:6px;user-select:none;border-left:6px solid var(--accent);}
.card.selected{outline:3px solid rgba(91,33,182,0.15);transform:translateY(-4px)}
.card.small{width:150px;padding:6px;border-left:6px solid;}
.card h4{margin:0 0 6px 0;font-size:14px}
.card p{margin:0;font-size:13px;color:var(--muted)}
.right{width:260px;display:flex;flex-direction:column;gap:12px;}
.log{height:140px;overflow:auto;padding:8px;background:linear-gradient(180deg,#fff,#fbfbff);border-radius:8px;border:1px dashed #edf2ff;font-size:13px}
.hint{font-size:13px;color:var(--muted)}
footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}
.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(15,23,42,0.75);display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(3px)}
.modal-content{background:white;max-width:640px;padding:28px;border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,0.2);animation:fadeIn .5s ease;text-align:center}
.modal-content img.logo{width:110px;margin-bottom:12px}
.modal-content h1{color:var(--accent);font-size:22px;margin-bottom:10px}
.modal-content p{color:#374151;line-height:1.5;margin-bottom:10px}
.modal-content .team{margin-top:14px;background:#f3e8ff;padding:10px;border-radius:10px;font-weight:600;color:#4c1d95}
.modal-content button{margin-top:18px;background:var(--accent);color:white;border:none;padding:10px 18px;border-radius:10px;font-size:15px;cursor:pointer}
@keyframes fadeIn{from{opacity:0;transform:scale(0.96)}to{opacity:1;transform:scale(1)}}
@media(max-width:900px){.top-area{flex-direction:column}.left,.right{width:100%}.eras{flex-direction:row;overflow:auto}}
</style>
</head>
<body>

<!-- AÃ§Ä±lÄ±ÅŸ modal -->
<div class="modal" id="introModal">
  <div class="modal-content">
    <img class="logo" src="https://upload.wikimedia.org/wikipedia/tr/c/cc/Ataturkuni_logo.png?20200406213338" alt="AtatÃ¼rk Ãœniversitesi">
    <h1>ZAMANIN MÄ°SKETLERÄ° ETKÄ°NLÄ°ÄžÄ°</h1>
    <p><strong>Sosyal Bilgiler Ã–ÄŸretiminde â€” Yerel Ã‡ocuk OyunlarÄ± Dersi</strong> kapsamÄ±nda hazÄ±rladÄ±ÄŸÄ±mÄ±z bu etkinlikte, biz Ã¶ÄŸrenciler geÃ§miÅŸten gÃ¼nÃ¼mÃ¼ze uzanan tarihi olaylarÄ± <em>misketlerle</em> zamana yerleÅŸtirerek Ã¶ÄŸreneceÄŸiz.</p>
    <p>AmacÄ±mÄ±z; kronoloji bilincini gÃ¼Ã§lendirmek, olaylar arasÄ±ndaki neden-sonuÃ§ iliÅŸkisini tartÄ±ÅŸmak ve takÄ±m Ã§alÄ±ÅŸmasÄ±yla Ã¶ÄŸrenmeyi keyifli hÃ¢le getirmektir.</p>
    <div class="team">
      <div>HazÄ±rlayanlar:</div>
      <div>Muhammet Emin AydÄ±n<br>Ã–mer Faruk Aras<br>Batuhan KalaycÄ±oÄŸlu<br>Abdulsamet DoÄŸramacÄ±<br>Mert Ã–mer Cacim</div>
    </div>
    <button id="startGameBtn">HazÄ±rsÄ±nÄ±z!</button>
  </div>
</div>

<div class="app" id="gameApp" style="display:none;">
  <header>
    <div class="logo">
      <div class="title">ZAMANIN MÄ°SKETLERÄ°</div>
      <div style="font-size:12px;color:var(--muted)">Dijital YerleÅŸtirme â€¢ 50 KartlÄ±k Versiyon</div>
    </div>
    <div class="controls">
      <button class="btn secondary" id="shuffleBtn">ðŸ”„ KartlarÄ± KarÄ±ÅŸtÄ±r</button>
      <div id="currentTeamLabel" style="font-weight:700;color:#0b1220;margin-right:8px">TakÄ±m: â€”</div>
      <button class="btn" id="resetBtn">SÄ±fÄ±rla</button>
      <button class="btn secondary" id="showResults">SonuÃ§larÄ± GÃ¶ster</button>
      <button class="btn secondary" id="exportBtn">Skoru Kopyala</button>
    </div>
  </header>

  <div class="top-area">
    <div class="left panel">
      <div style="font-weight:800;margin-bottom:8px">TakÄ±mlar</div>
      <div class="team-list" id="teamList"></div>
      <div class="add-team">
        <input id="teamInput" type="text" placeholder="Yeni takÄ±m adÄ± (Ã¶rn. Mavi TakÄ±m)" />
        <button class="btn" id="addTeamBtn">Ekle</button>
      </div>
      <div style="margin-top:8px;color:var(--muted);font-size:13px">TakÄ±m seÃ§meden yerleÅŸtirme yapÄ±lamaz.</div>
    </div>

    <div class="middle">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:800">Ã‡aÄŸ YuvalarÄ±</div>
        <div style="color:var(--muted);font-size:13px">DoÄŸru yerleÅŸtirme: +10 â€¢ YakÄ±n: +5 â€¢ YanlÄ±ÅŸ: 0</div>
      </div>
      <div class="eras" id="eras"></div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div style="font-weight:800">Olay KartlarÄ±</div>
        <div style="font-size:13px;color:var(--muted)">Kartlara dokunup seÃ§in, sonra bir Ã§aÄŸ seÃ§in (dokunmatik uyumlu).</div>
      </div>
      <div class="board panel" id="board"></div>
    </div>

    <div class="right panel">
      <div style="font-weight:800">Puan Tablosu</div>
      <div id="scoreboard"></div>
      <div style="margin-top:10px;font-weight:700">Oyun GÃ¼nlÃ¼ÄŸÃ¼</div>
      <div class="log" id="logArea"></div>
    </div>
  </div>

  <footer class="hint">Ã–ÄŸretmen ipucu: "Tahmin" temasÄ± iÃ§in yuvalarda tarihleri baÅŸlangÄ±Ã§ta gizleyin ve tartÄ±ÅŸma turu yapÄ±n.</footer>
</div>

<script>
// --- VERÄ°LER ---
// Ã‡aÄŸlar
const ERAS = [
  {id:'ilk', name:'Ä°lk Ã‡aÄŸ', rangeStart:-3200, rangeEnd:375, displayRange:'M.Ã–. 3200 â€“ M.S. 375'},
  {id:'orta', name:'Orta Ã‡aÄŸ', rangeStart:375, rangeEnd:1453, displayRange:'M.S. 375 â€“ 1453'},
  {id:'yeni', name:'Yeni Ã‡aÄŸ', rangeStart:1453, rangeEnd:1789, displayRange:'1453 â€“ 1789'},
  {id:'yakin', name:'YakÄ±n Ã‡aÄŸ', rangeStart:1789, rangeEnd:2100, displayRange:'1789 â€“ GÃ¼nÃ¼mÃ¼z'}
];

// 50 Kart: (senin onayladÄ±ÄŸÄ±n 10 + 40 geniÅŸletilmiÅŸ)
const CARDS = [
  {id:'k1', title:'Ä°lk YazÄ±nÄ±n Ä°cadÄ±', year:-3200, short:'SÃ¼merler yazÄ±yÄ± buldu.'},
  {id:'k2', title:'MÄ±sÄ±r Piramitleri', year:-2560, short:'Giza piramitleri inÅŸa edildi.'},
  {id:'k3', title:'Hammurabi KanunlarÄ±', year:-1750, short:'Ä°lk yazÄ±lÄ± hukuk kurallarÄ±.'},
  {id:'k4', title:'Yunan Åžehir Devletleri', year:-800, short:'Demokrasi temelleri atÄ±ldÄ±.'},
  {id:'k5', title:'Pers Ä°mparatorluÄŸu', year:-550, short:'BÃ¼yÃ¼k Asya imparatorluÄŸu.'},
  {id:'k6', title:'Roma Cumhuriyeti', year:-509, short:'Hukuk ve yÃ¶netim geliÅŸti.'},
  {id:'k7', title:'BÃ¼yÃ¼k Ä°skender DÃ¶nemi', year:-336, short:'Helenistik kÃ¼ltÃ¼r yayÄ±ldÄ±.'},
  {id:'k8', title:'Roma Ä°mparatorluÄŸuâ€™nun KuruluÅŸu', year:-27, short:'Akdeniz birliÄŸi ÅŸekillendi.'},
  {id:'k9', title:'Hz. Ä°saâ€™nÄ±n DoÄŸumu', year:0, short:'Milat baÅŸlangÄ±cÄ±.'},
  {id:'k10', title:'Roma Ä°mparatorluÄŸuâ€™nun YÄ±kÄ±lÄ±ÅŸÄ±', year:476, short:'Orta Ã‡aÄŸ baÅŸladÄ±.'},

  {id:'k11', title:'Kavimler GÃ¶Ã§Ã¼', year:375, short:'Avrupaâ€™da yeni krallÄ±klar kuruldu.'},
  {id:'k12', title:'Ä°slamiyetâ€™in DoÄŸuÅŸu', year:610, short:'Yeni bir inanÃ§ ve medeniyet doÄŸdu.'},
  {id:'k13', title:'TÃ¼rklerin Ä°slamiyeti KabulÃ¼', year:751, short:'TÃ¼rk-Ä°slam kÃ¼ltÃ¼rÃ¼ ÅŸekillendi.'},
  {id:'k14', title:'Uygur YazÄ±sÄ± GeliÅŸimi', year:800, short:'Erken TÃ¼rk yazÄ± Ã¶rnekleri.'},
  {id:'k15', title:'KarahanlÄ±lar DÃ¶nemi', year:940, short:'Ä°lk MÃ¼slÃ¼man TÃ¼rk devletleri.'},
  {id:'k16', title:'BÃ¼yÃ¼k SelÃ§uklu Devleti', year:1040, short:'Anadoluâ€™ya ilerleyiÅŸ baÅŸladÄ±.'},
  {id:'k17', title:'Malazgirt SavaÅŸÄ±', year:1071, short:'Anadoluâ€™nun kapÄ±larÄ± aÃ§Ä±ldÄ±.'},
  {id:'k18', title:'HaÃ§lÄ± Seferleri', year:1096, short:'DoÄŸu-BatÄ± iliÅŸkileri deÄŸiÅŸti.'},
  {id:'k19', title:'MoÄŸol Ä°stilasÄ±', year:1206, short:'Asyaâ€™da bÃ¼yÃ¼k yÄ±kÄ±mlar.'},
  {id:'k20', title:'Ä°stanbulâ€™un Fethi', year:1453, short:'Orta Ã‡aÄŸ sona erdi.'},

  {id:'k21', title:'MatbaanÄ±n Avrupaâ€™ya GiriÅŸi', year:1450, short:'Bilginin yayÄ±lmasÄ± hÄ±zlandÄ±.'},
  {id:'k22', title:'CoÄŸrafi KeÅŸifler', year:1492, short:'Yeni kÄ±talar bulundu.'},
  {id:'k23', title:'RÃ¶nesans', year:1500, short:'Sanat ve bilimde yeniden doÄŸuÅŸ.'},
  {id:'k24', title:'Reform Hareketleri', year:1517, short:'Dinde yenilenme dÃ¶nemi.'},
  {id:'k25', title:'Kanuni Sultan SÃ¼leyman DÃ¶nemi', year:1520, short:'OsmanlÄ± zirveye ulaÅŸtÄ±.'},
  {id:'k26', title:'KapÃ¼tÃ¼lasyonlarÄ±n Verilmesi', year:1535, short:'Ticari ayrÄ±calÄ±klar dÃ¶nemi.'},
  {id:'k27', title:'Rasathane KuruluÅŸu', year:1577, short:'GÃ¶zlem ve bilim ilkeleri.'},
  {id:'k28', title:'TÄ±mar Sistemi', year:1600, short:'OsmanlÄ± toprak dÃ¼zeni.'},
  {id:'k29', title:'Sanayi Devrimi', year:1769, short:'MakineleÅŸmeyle Ã¼retim deÄŸiÅŸti.'},
  {id:'k30', title:'FransÄ±z Ä°htilali', year:1789, short:'Ã–zgÃ¼rlÃ¼k ve eÅŸitlik fikirleri.'},

  {id:'k31', title:'Tanzimat FermanÄ±', year:1839, short:'OsmanlÄ±â€™da modernleÅŸme.'},
  {id:'k32', title:'TelgrafÄ±n Ä°cadÄ±', year:1837, short:'Ä°letiÅŸimde devrim.'},
  {id:'k33', title:'BuharlÄ± Lokomotif', year:1804, short:'UlaÅŸÄ±mda dÃ¶nÃ¼ÅŸÃ¼m.'},
  {id:'k34', title:'I. MeÅŸrutiyet', year:1876, short:'Anayasal yÃ¶netim denemesi.'},
  {id:'k35', title:'KÄ±rÄ±m SavaÅŸÄ±', year:1853, short:'Avrupa jeopolitiÄŸinde deÄŸiÅŸim.'},
  {id:'k36', title:'I. DÃ¼nya SavaÅŸÄ±', year:1914, short:'Yeni devletler doÄŸdu.'},
  {id:'k37', title:'KurtuluÅŸ SavaÅŸÄ±', year:1919, short:'BaÄŸÄ±msÄ±zlÄ±k mÃ¼cadelesi.'},
  {id:'k38', title:'Cumhuriyetin Ä°lanÄ±', year:1923, short:'TÃ¼rkiye Cumhuriyeti kuruldu.'},
  {id:'k39', title:'KadÄ±nlara SeÃ§me ve SeÃ§ilme HakkÄ±', year:1934, short:'Toplumsal haklar geniÅŸledi.'},
  {id:'k40', title:'II. DÃ¼nya SavaÅŸÄ±', year:1939, short:'DÃ¼nya yeniden ÅŸekillendi.'},

  {id:'k41', title:'BirleÅŸmiÅŸ Milletler', year:1945, short:'KÃ¼resel barÄ±ÅŸ giriÅŸimi.'},
  {id:'k42', title:'Ayâ€™a Ä°lk Ä°nsan', year:1969, short:'Apollo 11 ay yÃ¼rÃ¼yÃ¼ÅŸÃ¼.'},
  {id:'k43', title:'Ä°nternetin Ortaya Ã‡Ä±kÄ±ÅŸÄ±', year:1983, short:'Bilgi Ã§aÄŸÄ±nÄ±n baÅŸlangÄ±cÄ±.'},
  {id:'k44', title:'Berlin DuvarÄ±â€™nÄ±n YÄ±kÄ±lÄ±ÅŸÄ±', year:1989, short:'SoÄŸuk SavaÅŸ sona erdi.'},
  {id:'k45', title:'ABâ€™nin KuruluÅŸu (Maastricht)', year:1993, short:'Avrupa bÃ¼tÃ¼nleÅŸmesi.'},
  {id:'k46', title:'Cep TelefonlarÄ±nÄ±n YaygÄ±nlaÅŸmasÄ±', year:1995, short:'Mobil iletiÅŸim dÃ¶nemi.'},
  {id:'k47', title:'2000â€™li Dijital DÃ¶nem', year:2000, short:'DijitalleÅŸme hÄ±zlandÄ±.'},
  {id:'k48', title:'COVID-19 Pandemisi', year:2020, short:'KÃ¼resel saÄŸlÄ±k krizi.'},
  {id:'k49', title:'Yapay ZekÃ¢ Ã‡aÄŸÄ±', year:2025, short:'Yeni teknolojik dÃ¶nÃ¼ÅŸÃ¼m.'},
  {id:'k50', title:'GÃ¼ncel KÃ¼resel Ä°letiÅŸim', year:2010, short:'Sosyal medya ve hÄ±zlÄ± haberleÅŸme.'}
];

// --- DURUM ---
let teams = []; // {id,name,score,color}
let selectedTeamId = null;
let placed = {}; // cardId -> eraId
let selectedCardId = null;

// renk havuzu
const COLORS = ['#0ea5e9','#f97316','#10b981','#ef4444','#8b5cf6','#06b6d4','#f43f5e'];

// DOM ref'leri
let erasEl, boardEl, teamListEl, scoreboardEl, logEl, currentTeamLabel;

document.addEventListener('DOMContentLoaded', ()=> {
  erasEl = document.getElementById('eras');
  boardEl = document.getElementById('board');
  teamListEl = document.getElementById('teamList');
  scoreboardEl = document.getElementById('scoreboard');
  logEl = document.getElementById('logArea');
  currentTeamLabel = document.getElementById('currentTeamLabel');

  // modal start
  document.getElementById('startGameBtn').addEventListener('click', ()=>{
    document.getElementById('introModal').style.display = 'none';
    document.getElementById('gameApp').style.display = 'block';
  });

  // build eras
  ERAS.forEach(e=>{
    const d = document.createElement('div');
    d.className = 'era panel';
    d.id = 'era-'+e.id;
    d.dataset.era = e.id;
    d.innerHTML = `<div class="era-name">${e.name}</div><div class="era-range">${e.displayRange}</div>`;
    erasEl.appendChild(d);

    // drag & drop
    d.addEventListener('dragover', ev=> ev.preventDefault());
    d.addEventListener('dragenter', ()=> d.classList.add('dragover'));
    d.addEventListener('dragleave', ()=> d.classList.remove('dragover'));
    d.addEventListener('drop', ev=>{
      ev.preventDefault();
      d.classList.remove('dragover');
      const cardId = ev.dataTransfer.getData('text/plain');
      if(cardId) placeCard(cardId, e.id);
    });

    // click-to-place for touch workflows
    d.addEventListener('click', ()=> {
      if(selectedCardId) placeCard(selectedCardId, e.id);
    });
  });

  // render initial cards
  renderCards();

  // sample teams
  addTeam('Mavi TakÄ±m', COLORS[0]);
  addTeam('Turuncu TakÄ±m', COLORS[1]);
  addTeam('YeÅŸil TakÄ±m', COLORS[2]);
  addTeam('KÄ±rmÄ±zÄ± TakÄ±m', '#ef4444');

  // handlers
  document.getElementById('addTeamBtn').addEventListener('click', ()=>{
    const v = document.getElementById('teamInput').value.trim();
    if(!v) return alert('TakÄ±m adÄ± girin');
    addTeam(v);
    document.getElementById('teamInput').value = '';
  });
  document.getElementById('shuffleBtn').addEventListener('click', shuffleCards);
  document.getElementById('resetBtn').addEventListener('click', resetAll);
  document.getElementById('showResults').addEventListener('click', showResults);
  document.getElementById('exportBtn').addEventListener('click', ()=>{
    navigator.clipboard.writeText(getScoreText()).then(()=> alert('Skor panosu kopyalandÄ±!'));
  });
});

// --- Kart render ---
function renderCards(){
  boardEl.innerHTML = '';
  CARDS.forEach(c=>{
    if(placed[c.id]) return; // already placed
    const el = makeCardElement(c);
    boardEl.appendChild(el);
  });
}

function makeCardElement(c){
  const el = document.createElement('div');
  el.className = 'card';
  el.id = 'card-'+c.id;
  el.draggable = true;
  el.dataset.id = c.id;
  el.innerHTML = `<h4>${c.title}</h4><p>${c.short}</p>`;
  // dragstart
  el.addEventListener('dragstart', ev=>{
    ev.dataTransfer.setData('text/plain', c.id);
    // visual
    setSelectedCard(c.id);
  });
  // click (touch)
  el.addEventListener('click', ()=>{
    setSelectedCard(c.id);
    log(`Kart seÃ§ildi: ${c.title} â€” sonra bir yuvaya tÄ±klayÄ±n.`);
  });
  return el;
}

function setSelectedCard(cardId){
  // clear prev selection
  document.querySelectorAll('.card').forEach(x=> x.classList.remove('selected'));
  selectedCardId = cardId;
  const el = document.getElementById('card-'+cardId);
  if(el) el.classList.add('selected');
}

// --- TakÄ±mlar ---
function addTeam(name, color){
  const id = 't'+Date.now().toString(36).slice(-6);
  teams.push({id,name,score:0,color: color || COLORS[Math.floor(Math.random()*COLORS.length)]});
  renderTeams();
  selectTeam(id);
}

function renderTeams(){
  teamListEl.innerHTML = '';
  teams.forEach(t=>{
    const div = document.createElement('div');
    div.className = 'team-item' + (t.id===selectedTeamId ? ' active' : '');
    div.style.borderLeft = `6px solid ${t.color}`;
    div.innerHTML = `<div>${t.name}</div><div class="score">${t.score}</div>`;
    div.addEventListener('click', ()=> selectTeam(t.id));
    teamListEl.appendChild(div);
  });
  renderScoreboard();
}

function selectTeam(id){
  selectedTeamId = id;
  const team = teams.find(x=>x.id===id);
  currentTeamLabel.textContent = 'TakÄ±m: ' + (team ? team.name : 'â€”');
  renderTeams();
}

function renderScoreboard(){
  scoreboardEl.innerHTML = '';
  teams.forEach(t=>{
    const row = document.createElement('div');
    row.style.display='flex';row.style.justifyContent='space-between';row.style.alignItems='center';
    row.style.padding='6px';row.style.borderRadius='6px';row.style.background='#fff';row.style.marginBottom='6px';
    row.innerHTML = `<div style="font-weight:700">${t.name}</div><div style="font-weight:900;color:${t.color}">${t.score}</div>`;
    scoreboardEl.appendChild(row);
  });
}

// --- YerleÅŸtirme / Puanlama ---
function placeCard(cardId, eraId){
  if(!selectedTeamId){ alert('LÃ¼tfen Ã¶nce bir takÄ±m seÃ§in.'); return; }
  if(placed[cardId]) { log('(UyarÄ±) Bu kart zaten yerleÅŸtirildi.'); return; }

  const card = CARDS.find(c=>c.id===cardId);
  const era = ERAS.find(e=>e.id===eraId);
  if(!card || !era) return;

  // scoring: exact in range => +10, within threshold => +5, else 0
  let awarded = 0, reason = '';
  if(card.year >= era.rangeStart && card.year <= era.rangeEnd) {
    awarded = 10; reason = 'DoÄŸru yerleÅŸtirme';
  } else {
    // distance to nearest boundary (years)
    const dist = Math.min(Math.abs(card.year - era.rangeStart), Math.abs(card.year - era.rangeEnd));
    if(dist <= 60) { awarded = 5; reason = 'YakÄ±n yerleÅŸtirme'; }
    else { awarded = 0; reason = 'YanlÄ±ÅŸ yerleÅŸtirme'; }
  }

  // record placement
  placed[cardId] = eraId;
  // update team score
  const team = teams.find(t=>t.id===selectedTeamId);
  if(team) { team.score += awarded; }

  // visually move card into era as small card
  const eraEl = document.getElementById('era-'+eraId);
  if(eraEl){
    const small = document.createElement('div');
    small.className = 'card small';
    small.style.borderLeft = `6px solid ${team ? team.color : '#ccc'}`;
    small.innerHTML = `<strong style="font-size:13px">${card.title}</strong><div style="font-size:11px;color:var(--muted)">${card.year>0?card.year:(Math.abs(card.year)+' M.Ã–.')}</div>`;
    eraEl.appendChild(small);
  }

  // remove original from board
  const orig = document.getElementById('card-'+cardId);
  if(orig) orig.remove();

  renderTeams();
  log(`${team ? team.name : 'TakÄ±m'}: "${card.title}" â†’ ${era.name} (${reason}) [+${awarded}]`);
  // clear selection
  selectedCardId = null;
  document.querySelectorAll('.card').forEach(x=>x.classList.remove('selected'));
}

// --- YardÄ±mcÄ±lar ---
function shuffleCards(){
  // shuffle CARDS order (but keep placed ones already removed visually)
  for (let i = CARDS.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [CARDS[i], CARDS[j]] = [CARDS[j], CARDS[i]];
  }
  renderCards();
  log('Kartlar karÄ±ÅŸtÄ±rÄ±ldÄ±.');
}

function resetAll(){
  if(!confirm('TÃ¼m yerleÅŸtirmeleri ve puanlarÄ± sÄ±fÄ±rlamak istiyor musunuz?')) return;
  // reset state
  placed = {};
  teams.forEach(t=> t.score = 0);
  // clear era contents (keep headings)
  ERAS.forEach(e=>{
    const eraEl = document.getElementById('era-'+e.id);
    if(eraEl){
      eraEl.innerHTML = `<div class="era-name">${e.name}</div><div class="era-range">${e.displayRange}</div>`;
    }
  });
  renderCards();
  renderTeams();
  log('Oyun sÄ±fÄ±rlandÄ±.');
}

function showResults(){
  if(teams.length===0) return alert('HenÃ¼z takÄ±m yok.');
  const sorted = [...teams].sort((a,b)=>b.score-a.score);
  let s = '--- Skor Tablosu ---\n';
  sorted.forEach((t,i)=> s += `${i+1}. ${t.name} â€” ${t.score} puan\n`);
  alert(s);
}

function getScoreText(){
  const sorted = [...teams].sort((a,b)=>b.score-a.score);
  let text = 'Zamanin Misketleri - Skor\n';
  sorted.forEach((t,i)=> text += `${i+1}. ${t.name} â€” ${t.score} puan\n`);
  return text;
}

function log(text){
  const line = document.createElement('div');
  const now = new Date();
  line.textContent = `[${now.toLocaleTimeString()}] ${text}`;
  logEl.prepend(line);
}
</script>
</body>
</html>
